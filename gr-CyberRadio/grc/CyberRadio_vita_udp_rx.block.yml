id: CyberRadio_vita_udp_rx
label: '[CyberRadio] Vita UDP RX'
category: '[CyberRadio]/Vita Sources'

templates:
  imports: import CyberRadio
  make: |-
        CyberRadio.vita_udp_rx(
            ${src_ip}, 
            ${port}, 
            ${header_byte_offset}, 
            ${samples_per_packet},
            ${bytes_per_packet}, 
            ${swap_bytes}, 
            ${swap_iq}, 
            ${tag_packets}, 
            ${vector_output},
            ${uses_v491}, 
            ${narrowband}, 
            ${debug}
        )
cpp_templates:
  includes: ['#include <CyberRadio/vita_udp_rx.h>']
  declarations: 'CyberRadio::vita_udp_rx::sptr ${id};'
  make: 'this->${id} = CyberRadio::vita_udp_rx::make(${src_ip}, ${port}, ${header_byte_offset},${samples_per_packet},${bytes_per_packet}, ${swap_bytes}, ${swap_iq}, ${tag_packets}, ${vector_output},${uses_v491}, ${narrowband}, ${debug});'
  link: ['gnuradio-CyberRadio']
  translations:
    'True': 'true' 
    'False': 'false'

parameters:
-   id: src_ip
    label: Src_ip
    dtype: string
    default: '"0.0.0.0"'
-   id: port
    label: Port
    dtype: int
    default: '19091'
-   id: header_byte_offset
    label: Header_byte_offset
    dtype: int
    default: '36'
    hide: part
-   id: samples_per_packet
    label: Samples_per_packet
    dtype: int
    default: '1024'
    hide: part
-   id: bytes_per_packet
    label: Bytes_per_packet
    dtype: int
    default: '4136'
    hide: part
-   id: swap_bytes
    label: Swap_bytes
    dtype: bool
    default: 'False'
    options: ['True', 'False']
    hide: part
-   id: swap_iq
    label: Swap_iq
    dtype: bool
    default: 'False'
    options: ['True', 'False']
    hide: part
-   id: tag_packets
    label: Tag_packets
    dtype: enum
    default: 'False'
    options: ['True', 'False']
    hide: part
-   id: vector_output
    label: Vector Output?
    dtype: enum
    default: 'False'
    options: ['True', 'False']
    option_attributes:
        size: [$samples_per_packet, '1']
    hide: part
-   id: uses_v491
    label: Uses VITA 49.1
    dtype: enum
    default: 'True'
    options: ['True', 'False']
    hide: part
-   id: narrowband
    label: Narrowband?
    dtype: enum
    default: 'False'
    options: ['True', 'False']
    hide: part
-   id: debug
    label: Debug
    dtype: enum
    default: 'False'
    options: ['True', 'False']
    hide: part

inputs:
-   domain: message
    id: control
    optional: true

outputs:
-   domain: stream
    dtype: complex
    vlen: 1
-   domain: message
    id: status
    optional: true
-   domain: message
    id: freq
    optional: true
-   domain: message
    id: bw
    optional: true
#  'file_format' specifies the version of the GRC yml format used in the file
#  and should usually not be changed.
file_format: 1